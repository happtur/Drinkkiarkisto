{% extends "base.html" %}
{% block content %}

{% if success %}
	<div class="alert alert-success">
		{{success}}
	</div>
{% endif %}

{% if errors %}
	<div class="alert alert-danger">
		<ul>
			{% for error in errors %}
			<li>{{error}}</li>
			{% endfor %}
		</ul>
	</div>
{% endif %}


{% if user.admin == true %}
	<h1>User: {{user.name}} <small>admin</small></h1>
{% else %}
	<h1>User: {{user.name}}</h1>
{% endif %}

<br>

<div class="container">
	<h2>Drinks</h2>
	<div class="panel panel-primary">
		<div class="panel-heading">Approved</div>
		<div class="panel-body">
			<div class="list-group">
				{% for recipe in approved %}
					<a href="{{base_path}}/drink/{{recipe.id}}" class="list-group-item">{{recipe.name}}</a>
				{% endfor %}
			</div>
		</div>
	</div>
	{% if user.admin == false %}
	<div class="panel panel-primary">
		<div class="panel-heading">Pending approval</div>
		<div class="panel-body">
			<div class="list-group">
				{% for recipe in pending %}
					{% if user_logged_in.admin == true %}
					<a href="{{base_path}}/drink/suggestion/{{recipe.id}}" class="list-group-item">{{recipe.name}}</a>
					{% else %}
					<a href="{{base_path}}/drink/{{recipe.id}}" class="list-group-item">{{recipe.name}}</a>
					{% endif %}
				{% endfor %}
			</div>
		</div>
	</div>
	{% endif %}
</div>

<br>
{% if user_logged_in.id == user.id %}
	<form method="post" action="{{base_path}}/user/{{user.id}}/password" class="form-inline">
	<!-- should have to write password twice! -->
		<div class="form-group">
			<label>New password: </label>
			<input type="password" class="form-control" name="password">
		</div>
		<button type="submit" class="btn btn-primary">Change password</button>
	</form>
{% endif %}

<br>
<a href="{{base_path}}/user/{{user.id}}/delete" class="btn btn-danger">Delete account</a>

{% endblock %}